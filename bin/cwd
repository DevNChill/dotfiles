#!/bin/bash

# Check if the number of sessions is passed as an argument
if [ -z "$1" ]; then
    echo "Usage: cwdn, where n is the number of tmux sessions you want to create."
    exit 1
fi

# Capture the number of sessions
num_sessions=$1

# Get the current working directory
cwd=$(pwd)

# Create the first tmux session and attach to it
tmux new-session -d -c "$cwd" -s "session_1"
tmux attach-session -t "session_1"

# Create the rest of the tmux sessions as new windows
for i in $(seq 2 $num_sessions); do
    tmux new-window -c "$cwd" -n "window_$i"
done

echo "$num_sessions tmux windows created in the session, all starting in $cwd."
